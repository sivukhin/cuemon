{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "datasource",
          "uid": "grafana"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "description": "",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 90,
  "links": [
    {
      "$$hashKey": "object:232",
      "icon": "external link",
      "tags": [],
      "targetBlank": true,
      "title": "Hamsa GitHub",
      "type": "link",
      "url": "https://github.com/ShareChat/ml-platform/tree/master/sharecone"
    },
    {
      "$$hashKey": "object:899",
      "asDropdown": false,
      "icon": "external link",
      "tags": [
        "ml_platform_overview"
      ],
      "targetBlank": true,
      "type": "dashboards"
    }
  ],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "datasource": {
        "type": "datasource",
        "uid": "grafana"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 132,
      "panels": [],
      "targets": [
        {
          "datasource": {
            "type": "datasource",
            "uid": "grafana"
          },
          "refId": "A"
        }
      ],
      "title": "hamsa-api-overview",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 1
      },
      "hiddenSeries": false,
      "id": 160,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\",  route=~\"[[Path]]\",clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (route)",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Hamsa Api Total Request -Ds-generic-05",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:2204",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:2205",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 1
      },
      "hiddenSeries": false,
      "id": 142,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (route,status)",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{ingress=\"sharecone-service\", status=~\"${Status}\"}[1m] offset 24h)) by (le, status))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{status}}-1d-ago",
          "range": true,
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api general view",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:180",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:181",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 9
      },
      "hiddenSeries": false,
      "id": 140,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk_max(10, histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"[[Path]]\", status=~\"[[Status]]\",clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (le,route,status,kubernetes_pod_name)))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total p99 latency (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:34",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:35",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 9
      },
      "hiddenSeries": false,
      "id": 134,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m])) by (route,status)",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}",
          "metricQuery": {
            "projectName": "sharechat-production"
          },
          "queryType": "metrics",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m] offset 24h)) by (route,status)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-1d-ago",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total request rate",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:663",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:664",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 17
      },
      "hiddenSeries": false,
      "id": 158,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk_max(10, histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"[[Path]]\", status=~\"[[Status]]\",clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (le,route,status,kubernetes_pod_name)))",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}-{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Hamsa Api p99 ds-generic-service",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:1920",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:1921",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 17
      },
      "hiddenSeries": false,
      "id": 138,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"[[Path]]\", status=~\"[[Status]]\"}[1m])) by (le,route,status))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=\"/searchVectorNN\", status=\"200\"}[1m])) by (le,route,status))",
          "hide": true,
          "interval": "",
          "legendFormat": "/searchVectorNN-200-alert",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total p99 latency",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:223",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:224",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 25
      },
      "hiddenSeries": false,
      "id": 136,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(10, sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m])) by (route,status,kubernetes_pod_name))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(3, sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m])) by (route,status,kubernetes_pod_name))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total request rate (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:194",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:195",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "collapsed": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 33
      },
      "id": 10,
      "panels": [],
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "refId": "A"
        }
      ],
      "title": "index wise metrics",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": [],
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 34
      },
      "hiddenSeries": false,
      "id": 2,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(http_requests_by_index_total{service_prometheus_track=\"sharecone-service\", status=~\"${Status}\", route=~\"${Path}\",indexName=~\"${IndexName}\", clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (route,indexName,status)",
          "interval": "",
          "legendFormat": "{{indexName}}-{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api index wise request rate",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:143",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:144",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": [],
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 34
      },
      "hiddenSeries": false,
      "id": 51,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk_max(15, sum(rate(http_requests_by_index_total{service_prometheus_track=\"sharecone-service\", status=~\"${Status}\", route=~\"${Path}\", clustername=\"sc-p-ds-generic-services-05\"}[10m])) by (route,indexName,status))",
          "interval": "",
          "legendFormat": "{{indexName}}-{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api index wise request rate (max)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:143",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:144",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": [],
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 43
      },
      "hiddenSeries": false,
      "id": 3,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(http_request_duration_by_index_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"${Path}\", status=~\"${Status}\",indexName=~\"${IndexName}\"}[1m])) by (le,route,indexName,status))",
          "interval": "",
          "legendFormat": "{{indexName}}-{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api index wise p99 latency",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": [],
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 43
      },
      "hiddenSeries": false,
      "id": 50,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk_max(15, histogram_quantile(0.99, sum(rate(http_request_duration_by_index_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"${Path}\", status=~\"${Status}\"}[10m])) by (le,route,indexName,status)))",
          "interval": "",
          "legendFormat": "{{indexName}}-{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api index wise p99 latency (worst)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": [],
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 52
      },
      "hiddenSeries": false,
      "id": 8,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "max(size_of_index_present{service_prometheus_track=\"sharecone-index-builder\",indexName=~\"${IndexName}\"}) by (indexName)",
          "interval": "",
          "legendFormat": "{{indexName}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "index size",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:160",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:161",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": [],
          "unitScale": true
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 52
      },
      "hiddenSeries": false,
      "id": 44,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "10.3.0",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(15, max(size_of_index_present{service_prometheus_track=\"sharecone-index-builder\"}) by (indexName))",
          "interval": "",
          "legendFormat": "{{indexName}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "index size (largest)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:160",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:161",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 2,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 61
      },
      "hiddenSeries": false,
      "id": 57,
      "legend": {
        "alignAsTable": false,
        "avg": false,
        "current": false,
        "hideEmpty": false,
        "hideZero": false,
        "max": false,
        "min": false,
        "rightSide": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "connected",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 9,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "expr": "avg(recall_1000_index{indexName=~\"[[IndexName]]\"}) by (indexName)",
          "format": "time_series",
          "hide": false,
          "instant": false,
          "interval": "",
          "intervalFactor": 1,
          "legendFormat": "{{indexName}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Recall Top 1000",
      "tooltip": {
        "shared": false,
        "sort": 0,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:189",
          "format": "short",
          "label": "",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:190",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 61
      },
      "hiddenSeries": false,
      "id": 59,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "connected",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "expr": "avg(recall_500_index{indexName=~\"[[IndexName]]\"}) by (indexName)",
          "interval": "",
          "legendFormat": "{{IndexName}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Recall Top 500",
      "tooltip": {
        "shared": false,
        "sort": 0,
        "value_type": "individual"
      },
      "transparent": true,
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:149",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:150",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "collapsed": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 69
      },
      "id": 12,
      "panels": [],
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "refId": "A"
        }
      ],
      "title": "sharecone-service",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 70
      },
      "hiddenSeries": false,
      "id": 144,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk_max(10, sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", status=~\"[[Status]]\", route=~\"[[Path]]\",clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (route,status,kubernetes_pod_name))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Pod Wise Request - Ds-Generic",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:169",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:170",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 70
      },
      "hiddenSeries": false,
      "id": 54,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "current",
        "sortDesc": false,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(10, sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m])) by (route,status,kubernetes_pod_name))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(3, sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m])) by (route,status,kubernetes_pod_name))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total request rate (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:143",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:144",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 79
      },
      "hiddenSeries": false,
      "id": 52,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(rate(http_requests_total{service_prometheus_track=\"sharecone-service\", status=~\"[[Status]]\", route=~\"[[Path]]\"}[1m])) by (route,status)",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total request rate",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:143",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:144",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 79
      },
      "hiddenSeries": false,
      "id": 55,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(10, histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"[[Path]]\", status=~\"[[Status]]\"}[1m])) by (le,route,status,kubernetes_pod_name)))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "expr": "topk_max(3, histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", route=~\"[[Path]]\", status=~\"[[Status]]\", clustername=\"[[Cluster]]\"}[1m])) by (le,route,status,kubernetes_pod_name)))",
          "interval": "",
          "legendFormat": "{{route}}-{{status}}-{{kubernetes_pod_name}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "hamsa api total p99 latency (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "alert": {
        "alertRuleTags": {
          "og_priority": "P2"
        },
        "conditions": [
          {
            "evaluator": {
              "params": [
                0.15
              ],
              "type": "gt"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "B",
                "1m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "avg"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "alerting",
        "for": "5m",
        "frequency": "1m",
        "handler": 1,
        "message": "@aryansharma @vivekchandela @kartikeypohani",
        "name": "Hamsa for Sharechat: sharecone-service searchVectorNN p99 latency [SLA]",
        "noDataState": "alerting",
        "notifications": [
          {
            "uid": "5Z70mApnz"
          },
          {
            "uid": "ernA8Oy7k"
          }
        ]
      },
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 88
      },
      "hiddenSeries": false,
      "id": 53,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{service_prometheus_track=\"sharecone-service\", route=~\"[[Path]]\", status=~\"[[Status]]\",clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (le,route,status))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{route}}-{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 0.15,
          "visible": true
        }
      ],
      "timeRegions": [],
      "title": "hamsa api total p99 latency",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "alert": {
        "alertRuleTags": {
          "og_priority": "P3"
        },
        "conditions": [
          {
            "evaluator": {
              "params": [
                100
              ],
              "type": "gt"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "A",
                "1m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "avg"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "alerting",
        "for": "10m",
        "frequency": "1m",
        "handler": 1,
        "message": "@aryansharma @vivekchandela @kartikeypohani",
        "name": "Hamsa for ShareChat: 5xx sharecone-service responses",
        "noDataState": "no_data",
        "notifications": [
          {
            "uid": "5Z70mApnz"
          },
          {
            "uid": "ernA8Oy7k"
          }
        ]
      },
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 88
      },
      "hiddenSeries": false,
      "id": 26,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(nginx_ingress_controller_requests{ingress=\"sharecone-service\", status=~\"[5].*\", clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (ingress, status)",
          "interval": "",
          "legendFormat": "{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 100,
          "visible": true
        }
      ],
      "timeRegions": [],
      "title": "hamsa api 5xx responses",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:420",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:421",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "alert": {
        "alertRuleTags": {
          "og_priority": "P3"
        },
        "conditions": [
          {
            "evaluator": {
              "params": [
                100
              ],
              "type": "gt"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "A",
                "5m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "avg"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "alerting",
        "for": "30m",
        "frequency": "1m",
        "handler": 1,
        "message": "@aryansharma @vivekchandela @kartikeypohani",
        "name": "Hamsa for Sharechat: 4xx sharecone-service responses",
        "noDataState": "no_data",
        "notifications": [
          {
            "uid": "5Z70mApnz"
          },
          {
            "uid": "ernA8Oy7k"
          }
        ]
      },
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 97
      },
      "hiddenSeries": false,
      "id": 14,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(nginx_ingress_controller_requests{ingress=\"sharecone-service\", status=~\"[4].*\", clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (ingress, status)",
          "interval": "",
          "legendFormat": "{{status}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 100,
          "visible": true
        }
      ],
      "timeRegions": [],
      "title": "hamsa api 4xx responses",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:472",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:473",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 97
      },
      "hiddenSeries": false,
      "id": 46,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "avg",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [used]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "editorMode": "visual",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "sc-p-ds-generic-services-05",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=",
              "sharecone-service",
              "AND",
              "metric.label.memory_type",
              "=",
              "non-evictable"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/memory/used_bytes",
            "perSeriesAligner": "ALIGN_MEAN",
            "preprocessor": "none",
            "projectName": "$GcpProject",
            "query": "",
            "unit": "By",
            "valueType": "INT64"
          },
          "queryType": "metrics",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [requested]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "editorMode": "visual",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "sc-p-ds-generic-services-05",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=",
              "sharecone-service"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/memory/request_bytes",
            "perSeriesAligner": "ALIGN_NEXT_OLDER",
            "preprocessor": "none",
            "projectName": "$GcpProject",
            "query": "",
            "unit": "By",
            "valueType": "INT64"
          },
          "queryType": "metrics",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service container ram (sum by deployment) - sc-p-ds-generic-services-05",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:357",
          "format": "bytes",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:358",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 105
      },
      "hiddenSeries": false,
      "id": 45,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "avg",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [used]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "editorMode": "visual",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "sc-p-ds-generic-service-05",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "CUMULATIVE",
            "metricType": "kubernetes.io/container/cpu/core_usage_time",
            "perSeriesAligner": "ALIGN_RATE",
            "preprocessor": "none",
            "projectName": "$GcpProject",
            "query": "",
            "unit": "s{CPU}",
            "valueType": "DOUBLE"
          },
          "queryType": "metrics",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [requested]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "editorMode": "visual",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "sc-p-ds-generic-service-05",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/cpu/request_cores",
            "perSeriesAligner": "ALIGN_NEXT_OLDER",
            "preprocessor": "none",
            "projectName": "$GcpProject",
            "query": "",
            "unit": "{cpu}",
            "valueType": "DOUBLE"
          },
          "queryType": "metrics",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service container cpu cores (sum by deployment) - sc-p-ds-generic-services-05",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:713",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:714",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 105
      },
      "hiddenSeries": false,
      "id": 154,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(kube_deployment_status_replicas_available{clustername=\"sc-p-ds-generic-services-05\", namespace=\"sharecone\", deployment=\"sharecone-service\"}) by (deployment)",
          "interval": "",
          "legendFormat": "",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Pod Available- Ds-generice-service-05",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:943",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:944",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 113
      },
      "hiddenSeries": false,
      "id": 156,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(increase(kube_pod_container_status_restarts_total{clustername=\"sc-p-ds-generic-services-05\", namespace=\"sharecone\", container=\"sharecone-service\"}[5m])) by (container)",
          "interval": "",
          "legendFormat": "",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Pod Restart - Ds-generics-service-05",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:1003",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:1004",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 113
      },
      "hiddenSeries": false,
      "id": 48,
      "legend": {
        "avg": false,
        "current": false,
        "hideEmpty": true,
        "hideZero": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "exemplar": true,
          "expr": "sum(increase(kube_pod_container_status_restarts_total{clustername=\"[[Cluster]]\", namespace=\"sharecone\", container=\"sharecone-service\"}[5m])) by (container)",
          "format": "time_series",
          "instant": false,
          "interval": "",
          "legendFormat": "{{deployment}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service pods restarts",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:125",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:126",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(255, 255, 255)"
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 24,
        "x": 0,
        "y": 121
      },
      "id": 87,
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "text": {},
        "textMode": "name"
      },
      "pluginVersion": "9.3.2",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "count(go_info{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}) by (version)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{ version }}",
          "refId": "A"
        }
      ],
      "title": "sharecone-service go version",
      "type": "stat"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 124
      },
      "hiddenSeries": false,
      "id": 89,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_memstats_heap_alloc_bytes{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\"}[1m]) by (kubernetes_pod_name)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_memstats_heap_alloc_bytes{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m])",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service heap size",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 124
      },
      "hiddenSeries": false,
      "id": 91,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_memstats_heap_alloc_bytes{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\"}[1m]) by (kubernetes_pod_name)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service-canary heap size",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 133
      },
      "hiddenSeries": false,
      "id": 93,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_memstats_next_gc_bytes{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\"}[1m]) by (kubernetes_pod_name)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_memstats_next_gc_bytes{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m])",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service next GC trigger size",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 133
      },
      "hiddenSeries": false,
      "id": 95,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_memstats_next_gc_bytes{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m]) by (kubernetes_pod_name)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service-canary next GC trigger size",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "bytes",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 142
      },
      "hiddenSeries": false,
      "id": 97,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_threads{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\"}[1m]) by (kubernetes_pod_name)",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_threads{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m])",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service threads",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 142
      },
      "hiddenSeries": false,
      "id": 99,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_threads{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m]) by (kubernetes_pod_name)",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service-canary threads",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 151
      },
      "hiddenSeries": false,
      "id": 101,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_goroutines{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\"}[1m]) by (kubernetes_pod_name)",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_goroutines{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m])",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service goroutines",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 151
      },
      "hiddenSeries": false,
      "id": 103,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_goroutines{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m]) by (kubernetes_pod_name)",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service-canary goroutines",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 160
      },
      "hiddenSeries": false,
      "id": 105,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "hideEmpty": false,
        "hideZero": false,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(rate(go_gc_pauses_seconds_sum{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\"}[2m])) by (kubernetes_pod_name)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{ kubernetes_pod_name }}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(rate(go_gc_pauses_seconds_sum{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[2m]))",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service gc pauses total latency",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 160
      },
      "hiddenSeries": false,
      "id": 107,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "hideEmpty": false,
        "hideZero": false,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(rate(go_gc_pauses_seconds_sum{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[2m])) by (kubernetes_pod_name)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{ kubernetes_pod_name }}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service-canary gc pauses total latency",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 169
      },
      "hiddenSeries": false,
      "id": 109,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "hideEmpty": false,
        "hideZero": false,
        "max": true,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "max",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(go_sched_latencies_seconds_bucket{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\"}[2m])) by (le, kubernetes_pod_name))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{ kubernetes_pod_name }}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(go_sched_latencies_seconds_bucket{service_prometheus_track=\"sharecone-service\", id!=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[2m])) by (le))",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "go_tim",
          "hide": false,
          "interval": "",
          "legendFormat": "Total",
          "refId": "C"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service goroutine scheduling latency (p99)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 169
      },
      "hiddenSeries": false,
      "id": 111,
      "legend": {
        "alignAsTable": true,
        "avg": false,
        "current": true,
        "hideEmpty": false,
        "hideZero": false,
        "max": false,
        "min": false,
        "rightSide": true,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:654",
          "alias": "Total",
          "color": "#5794F2",
          "fill": 5,
          "yaxis": 2,
          "zindex": -1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(go_sched_latencies_seconds_bucket{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[2m])) by (le, kubernetes_pod_name))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{ kubernetes_pod_name }}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service-canary goroutine scheduling latency (p99)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "s",
          "logBase": 1,
          "min": "0",
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 178
      },
      "hiddenSeries": false,
      "id": 60,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "sum(go_goroutines{service_prometheus_track=\"sharecone-service\"}[1m])",
          "interval": "",
          "legendFormat": "",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service goroutines",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 178
      },
      "hiddenSeries": false,
      "id": 61,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(10, sum(go_goroutines{service_prometheus_track=\"sharecone-service\"}[1m]) by (kubernetes_pod_name))",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "expr": "topk_max(3, sum(go_goroutines{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}[1m]) by (kubernetes_pod_name))",
          "interval": "",
          "legendFormat": "{{kubernetes_pod_name}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-service goroutines (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "Number of open GRPC connection pools  partitioned by index group",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 187
      },
      "hiddenSeries": false,
      "id": 70,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(15, sum(-1 * grpc_connection_pool_available{service_prometheus_track=\"sharecone-service\"}) by (indexGroup)) * -1",
          "interval": "",
          "legendFormat": "{{indexGroup}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "number of grpc connections available (by index-group, mink)",
      "tooltip": {
        "shared": true,
        "sort": 1,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:254",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:255",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 187
      },
      "hiddenSeries": false,
      "id": 71,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(10, sum(-1 * grpc_connection_pool_available{service_prometheus_track=\"sharecone-service\"}) by (indexGroup, kubernetes_pod_name)) * -1",
          "interval": "",
          "legendFormat": "{{indexGroup}}-{{kubernetes_pod_name}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "expr": "topk_max(5, sum(-1 * grpc_connection_pool_available{service_prometheus_track=\"sharecone-service\", id=\"sharecone-service-canary\", clustername=\"[[Cluster]]\"}) by (indexGroup, kubernetes_pod_name)) * -1",
          "interval": "",
          "legendFormat": "{{indexGroup}}-{{kubernetes_pod_name}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "number of grpc connections available (by index-group, pod, mink)",
      "tooltip": {
        "shared": true,
        "sort": 1,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:254",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:255",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 195
      },
      "id": 38,
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "number of seconds for which index is not being rebuilt in time",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 4
          },
          "hiddenSeries": false,
          "id": 75,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(hamsa_index_staleness_seconds{service_prometheus_track=\"sharecone-index-builder\", indexName=~\".*\"}) by (indexName)",
              "interval": "",
              "legendFormat": "{{indexName}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "hamsa index staleness",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:104",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:105",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "alert": {
            "alertRuleTags": {},
            "conditions": [
              {
                "evaluator": {
                  "params": [
                    3600
                  ],
                  "type": "gt"
                },
                "operator": {
                  "type": "and"
                },
                "query": {
                  "params": [
                    "A",
                    "5m",
                    "now"
                  ]
                },
                "reducer": {
                  "params": [],
                  "type": "avg"
                },
                "type": "query"
              }
            ],
            "executionErrorState": "alerting",
            "for": "5m",
            "frequency": "1m",
            "handler": 1,
            "message": "Some indices are not being rebuilt in time\n\n@aryansharma @vivekchandela @kartikeypohani",
            "name": "Hamsa for Sharechat: index-builder index staleness [SLA]",
            "noDataState": "alerting",
            "notifications": [
              {
                "uid": "ernA8Oy7k"
              }
            ]
          },
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "number of seconds for which index is not being rebuilt in time",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 4
          },
          "hiddenSeries": false,
          "id": 77,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "topk_max(10, max(hamsa_index_staleness_seconds{service_prometheus_track=\"sharecone-index-builder\",indexName!~\"ads\",clustername=\"sc-p-ds-generic-jobs-01\"}) by (indexName))",
              "interval": "",
              "legendFormat": "{{indexName}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "exemplar": true,
              "expr": "hamsa_index_staleness_seconds{service_prometheus_track=\"sharecone-index-builder\"}",
              "hide": true,
              "interval": "",
              "legendFormat": "",
              "refId": "B"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 3600,
              "visible": true
            }
          ],
          "timeRegions": [],
          "title": "hamsa index staleness (worst)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:183",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:184",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 12
          },
          "hiddenSeries": false,
          "id": 79,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "max(hamsa_index_build_duration_seconds{service_prometheus_track=\"sharecone-index-builder\", indexName=~\".*\"}) by (indexName)",
              "interval": "",
              "legendFormat": "{{indexName}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "hamsa index building duration",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:210",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:211",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "alert": {
            "alertRuleTags": {},
            "conditions": [
              {
                "evaluator": {
                  "params": [
                    599
                  ],
                  "type": "gt"
                },
                "operator": {
                  "type": "and"
                },
                "query": {
                  "params": [
                    "A",
                    "5m",
                    "now"
                  ]
                },
                "reducer": {
                  "params": [],
                  "type": "avg"
                },
                "type": "query"
              }
            ],
            "executionErrorState": "alerting",
            "for": "5m",
            "frequency": "1m",
            "handler": 1,
            "message": "@aryansharma @vivekchandela @kartikeypohani",
            "name": "Hamsa for Sharechat: index building duration",
            "noDataState": "alerting",
            "notifications": [
              {
                "uid": "ernA8Oy7k"
              }
            ]
          },
          "aliasColors": {
            "test-index-1": "green"
          },
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 12
          },
          "hiddenSeries": false,
          "id": 81,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "exemplar": true,
              "expr": "topk_max(10, max(hamsa_index_build_duration_seconds{service_prometheus_track=\"sharecone-index-builder\"}) by (indexName))",
              "interval": "",
              "legendFormat": "{{indexName}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "exemplar": true,
              "expr": "hamsa_index_build_duration_seconds{service_prometheus_track=\"sharecone-index-builder\"}",
              "hide": false,
              "interval": "",
              "legendFormat": "",
              "refId": "B"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 599,
              "visible": true
            }
          ],
          "timeRegions": [],
          "title": "hamsa index building duration (worst)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:237",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:238",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "plots last build time of all indices",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 20
          },
          "hiddenSeries": false,
          "id": 39,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "expr": "max(time()-hamsa_index_build_time{service_prometheus_track=\"sharecone-index-builder\", indexName=~\".*\"}) by (indexName)",
              "hide": false,
              "interval": "",
              "legendFormat": "{{indexName}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Hamsa Index build Frequency",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:76",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:77",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 20
          },
          "hiddenSeries": false,
          "id": 24,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "expr": "topk_max(10, max(time()-hamsa_index_build_time{service_prometheus_track=\"sharecone-index-builder\"}) by (indexName))",
              "hide": false,
              "interval": "",
              "legendFormat": "{{indexName}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "expr": "time()-hamsa_index_build_time{service_prometheus_track=\"sharecone-index-builder\", clustername=\"production-cluster-41\"}",
              "hide": true,
              "interval": "",
              "legendFormat": "",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Hamsa Index build Frequency (worst)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:76",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:77",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 29
          },
          "hiddenSeries": false,
          "id": 67,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "expr": "max(hamsa_skipped_vector_count{service_prometheus_track=\"sharecone-index-builder\", indexName=~\".*\"}) by (indexName)",
              "hide": false,
              "interval": "",
              "legendFormat": "{{indexName}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "index-builder skipped vector count",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:76",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:77",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "alert": {
            "alertRuleTags": {},
            "conditions": [
              {
                "evaluator": {
                  "params": [
                    0
                  ],
                  "type": "gt"
                },
                "operator": {
                  "type": "and"
                },
                "query": {
                  "params": [
                    "B",
                    "1m",
                    "now"
                  ]
                },
                "reducer": {
                  "params": [],
                  "type": "avg"
                },
                "type": "query"
              }
            ],
            "executionErrorState": "alerting",
            "for": "10m",
            "frequency": "1m",
            "handler": 1,
            "message": "@aryansharma @vivekchandela @kartikeypohani",
            "name": "Hamsa for ShareChat: index-builder skipped vector count",
            "noDataState": "alerting",
            "notifications": [
              {
                "uid": "5Z70mApnz"
              },
              {
                "uid": "ernA8Oy7k"
              }
            ]
          },
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 29
          },
          "hiddenSeries": false,
          "id": 68,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "exemplar": true,
              "expr": "topk_max(10, max(hamsa_skipped_vector_count{service_prometheus_track=\"sharecone-index-builder\",clustername=\"sc-p-ds-generic-jobs-01\"}) by (indexName))",
              "hide": false,
              "interval": "",
              "legendFormat": "{{indexName}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "expr": "hamsa_skipped_vector_count{service_prometheus_track=\"sharecone-index-builder\", clustername=\"production-cluster-41\"}",
              "hide": true,
              "interval": "",
              "legendFormat": "",
              "refId": "B"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 0,
              "visible": true
            }
          ],
          "timeRegions": [],
          "title": "index-builder skipped vector count (worst)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:76",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:77",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 38
          },
          "hiddenSeries": false,
          "id": 40,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": false,
            "min": false,
            "show": true,
            "sort": "avg",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}} [used]",
                "alignmentPeriod": "+60s",
                "crossSeriesReducer": "REDUCE_SUM",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "sc-p-ds-generic-jobs-01",
                  "AND",
                  "resource.label.namespace_name",
                  "=",
                  "sharecone",
                  "AND",
                  "resource.label.container_name",
                  "=~",
                  "$IndexBuilder"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "CUMULATIVE",
                "metricType": "kubernetes.io/container/cpu/core_usage_time",
                "perSeriesAligner": "ALIGN_RATE",
                "preprocessor": "none",
                "projectName": "prj-sc-p-ds-services",
                "query": "",
                "unit": "s{CPU}",
                "valueType": "DOUBLE"
              },
              "queryType": "metrics",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}} [requested]",
                "alignmentPeriod": "+60s",
                "crossSeriesReducer": "REDUCE_SUM",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "$Cluster",
                  "AND",
                  "resource.label.namespace_name",
                  "=",
                  "sharecone",
                  "AND",
                  "resource.label.container_name",
                  "=~",
                  "$IndexBuilder"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/cpu/request_cores",
                "perSeriesAligner": "ALIGN_NEXT_OLDER",
                "preprocessor": "none",
                "projectName": "prj-sc-p-ds-services",
                "query": "",
                "unit": "{cpu}",
                "valueType": "DOUBLE"
              },
              "queryType": "metrics",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "index-builder container cpu cores (sum by deployment)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:713",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:714",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 38
          },
          "hiddenSeries": false,
          "id": 41,
          "legend": {
            "alignAsTable": true,
            "avg": true,
            "current": true,
            "max": false,
            "min": false,
            "show": true,
            "sort": "avg",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}} [used]",
                "alignmentPeriod": "+60s",
                "crossSeriesReducer": "REDUCE_SUM",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "sc-p-ds-generic-jobs-01",
                  "AND",
                  "resource.label.namespace_name",
                  "=",
                  "sharecone",
                  "AND",
                  "resource.label.container_name",
                  "=~",
                  "$IndexBuilder",
                  "AND",
                  "metric.label.memory_type",
                  "=",
                  "non-evictable"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/memory/used_bytes",
                "perSeriesAligner": "ALIGN_MEAN",
                "preprocessor": "none",
                "projectName": "prj-sc-p-ds-services",
                "query": "",
                "unit": "By",
                "valueType": "INT64"
              },
              "queryType": "metrics",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}} [requested]",
                "alignmentPeriod": "+60s",
                "crossSeriesReducer": "REDUCE_SUM",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "sc-p-ds-generic-jobs-01",
                  "AND",
                  "resource.label.namespace_name",
                  "=",
                  "sharecone",
                  "AND",
                  "resource.label.container_name",
                  "=~",
                  "$IndexBuilder"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/memory/request_bytes",
                "perSeriesAligner": "ALIGN_NEXT_OLDER",
                "preprocessor": "none",
                "projectName": "prj-sc-p-ds-services",
                "query": "",
                "unit": "By",
                "valueType": "INT64"
              },
              "queryType": "metrics",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "index-builder container ram (sum by deployment)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:357",
              "format": "bytes",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:358",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 46
          },
          "hiddenSeries": false,
          "id": 42,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "sum(kube_deployment_status_replicas_available{clustername=\"sc-p-ds-generic-jobs-01\", namespace=\"sharecone\", deployment=~\"[[IndexBuilder]]\"}) by (deployment)",
              "format": "time_series",
              "instant": false,
              "interval": "",
              "legendFormat": "{{deployment}}",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "expr": "min(sum(kube_deployment_status_replicas_available{clustername=\"production-cluster-41\", namespace=\"sharecone\", deployment=~\"hamsa-index-builder-.*\"}) by (deployment))",
              "hide": true,
              "interval": "",
              "legendFormat": "",
              "refId": "B"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "index-builder pods availability",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:510",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:511",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "alert": {
            "alertRuleTags": {},
            "conditions": [
              {
                "evaluator": {
                  "params": [
                    1
                  ],
                  "type": "gt"
                },
                "operator": {
                  "type": "and"
                },
                "query": {
                  "params": [
                    "A",
                    "1m",
                    "now"
                  ]
                },
                "reducer": {
                  "params": [],
                  "type": "max"
                },
                "type": "query"
              }
            ],
            "executionErrorState": "alerting",
            "for": "0m",
            "frequency": "1m",
            "handler": 1,
            "message": "@aryansharma @vivekchandela @kartikeypohani",
            "name": "Hamsa for ShareChat: index-builder pods restarts",
            "noDataState": "no_data",
            "notifications": [
              {
                "uid": "5Z70mApnz"
              },
              {
                "uid": "ernA8Oy7k"
              }
            ]
          },
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 46
          },
          "hiddenSeries": false,
          "id": 43,
          "legend": {
            "avg": false,
            "current": false,
            "hideEmpty": true,
            "hideZero": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "topk(10, sum(increase(kube_pod_container_status_restarts_total{clustername=\"sc-p-ds-generic-jobs-01\", namespace=\"sharecone\", container=~\"hamsa-index-builder-.*\"}[5m])) by (container))",
              "format": "time_series",
              "instant": false,
              "interval": "",
              "legendFormat": "{{deployment}}",
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 1,
              "visible": true
            }
          ],
          "timeRegions": [],
          "title": "index-builder pods restarts (worst)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:125",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:126",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 54
          },
          "hiddenSeries": false,
          "id": 146,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "sum(rate(container_cpu_cfs_throttled_periods_total{namespace=\"sharecone\", pod=~\"[[IndexBuilder]]-.*\"}[1m])) by (pod) / sum(rate(container_cpu_cfs_periods_total{namespace=\"sharecone\", pod=~\"[[IndexBuilder]]-.*\"}[1m])) by (pod)",
              "interval": "",
              "legendFormat": "{{pod}}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "index-builder cpu throttling",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 54
          },
          "hiddenSeries": false,
          "id": 148,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "topk(10, sum(rate(container_cpu_cfs_throttled_periods_total{namespace=\"sharecone\", pod=~\"hamsa-index-builder-.*\"}[1m])) by (pod) / sum(rate(container_cpu_cfs_periods_total{namespace=\"sharecone\", pod=~\"hamsa-index-builder-.*\"}[1m])) by (pod))",
              "interval": "",
              "legendFormat": "{{pod}}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "index-builder cpu throttling (worst)",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "refId": "A"
        }
      ],
      "title": "index-builder",
      "type": "row"
    },
    {
      "collapsed": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 196
      },
      "id": 33,
      "panels": [],
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "refId": "A"
        }
      ],
      "title": "tf-service",
      "type": "row"
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 197
      },
      "hiddenSeries": false,
      "id": 83,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "max(hamsa_index_staleness_seconds{service_prometheus_track=~\"[[TfService]]\",indexName!~\".*ads.*\"}) by (indexName)",
          "interval": "",
          "legendFormat": "{{indexName}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "tf-service index staleness",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:122",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:123",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "alert": {
        "alertRuleTags": {},
        "conditions": [
          {
            "evaluator": {
              "params": [
                3600
              ],
              "type": "gt"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "B",
                "1m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "avg"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "alerting",
        "for": "5m",
        "frequency": "1m",
        "handler": 1,
        "message": "Some indices are not being served in time\n\n@aryansharma @vivekchandela @kartikeypohani",
        "name": "Hamsa for Sharechat: tf-service index staleness [SLA]",
        "noDataState": "alerting",
        "notifications": [
          {
            "uid": "ernA8Oy7k"
          }
        ]
      },
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 197
      },
      "hiddenSeries": false,
      "id": 85,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk_max(10, max(hamsa_index_staleness_seconds{app=~\"hamsa-tf-service-.*\" , indexName!~\".*ads.*\"}) by (indexName))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{indexName}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "max(hamsa_index_staleness_seconds{app=~\"hamsa-tf-service-.*\"}) by (indexName) unless (max(size_of_index_present{service_prometheus_track=\"sharecone-index-builder\"}) by (indexName) < 16)",
          "hide": true,
          "interval": "",
          "legendFormat": "",
          "refId": "B"
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 3600,
          "visible": true
        }
      ],
      "timeRegions": [],
      "title": "tf-service index staleness (worst)",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:154",
          "format": "s",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:155",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 205
      },
      "hiddenSeries": false,
      "id": 65,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(:tensorflow:serving:request_count{namespace=\"sharecone\",clustername=\"sc-p-ds-generic-services-05\"}[1m])) by (model_name)",
          "interval": "",
          "legendFormat": "{{model_name}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-tf-service index wise request rate",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:143",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:144",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 205
      },
      "hiddenSeries": false,
      "id": 162,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(kube_deployment_status_replicas_available{clustername=\"sc-p-ds-generic-services-05\", namespace=\"sharecone\", deployment=~\"[[TfService]]\"}) by (deployment)",
          "interval": "",
          "legendFormat": "{{deployment}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Tf-Service Pod Availability - Ds-generic-Service-03",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:548",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:549",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 214
      },
      "hiddenSeries": false,
      "id": 63,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "histogram_quantile(0.99, sum(rate(:tensorflow:serving:request_latency_bucket{clustername=\"sc-p-ds-generic-services-05\", service_prometheus_track=~\".*\",namespace=\"sharecone\"}[1m])) by (le, model_name))",
          "interval": "",
          "legendFormat": "{{model_name}}",
          "range": true,
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-tf-service index wise p99 latency",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "µs",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 214
      },
      "hiddenSeries": false,
      "id": 66,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "current",
        "sortDesc": false,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "exemplar": true,
          "expr": "topk_max(15, sum(rate(:tensorflow:serving:request_count{service_prometheus_track=~\"[[TfService]]\"}[1m])) by (model_name, kubernetes_pod_name))",
          "interval": "",
          "legendFormat": "{{model_name}}-{{kubernetes_pod_name}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-tf-service index wise request rate (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:143",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:144",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 223
      },
      "hiddenSeries": false,
      "id": 35,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "avg",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:106",
          "alias": "hamsa-tf-service [used total]",
          "hiddenSeries": true,
          "linewidth": 2
        },
        {
          "$$hashKey": "object:503",
          "alias": "hamsa-tf-service [requested total]",
          "hiddenSeries": true,
          "linewidth": 2
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [used]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "$TfService"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "CUMULATIVE",
            "metricType": "kubernetes.io/container/cpu/core_usage_time",
            "perSeriesAligner": "ALIGN_RATE",
            "projectName": "$GcpProject",
            "unit": "s{CPU}",
            "valueType": "DOUBLE"
          },
          "queryType": "metrics",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [requested]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "$TfService"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/cpu/request_cores",
            "perSeriesAligner": "ALIGN_NEXT_OLDER",
            "projectName": "$GcpProject",
            "unit": "{cpu}",
            "valueType": "DOUBLE"
          },
          "queryType": "metrics",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "hamsa-tf-service [used total]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "hamsa-tf-service-.*"
            ],
            "groupBys": [],
            "metricKind": "CUMULATIVE",
            "metricType": "kubernetes.io/container/cpu/core_usage_time",
            "perSeriesAligner": "ALIGN_RATE",
            "projectName": "$GcpProject",
            "unit": "s{CPU}",
            "valueType": "DOUBLE"
          },
          "queryType": "metrics",
          "refId": "C"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "hamsa-tf-service [requested total]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "hamsa-tf-service-.*"
            ],
            "groupBys": [],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/cpu/request_cores",
            "perSeriesAligner": "ALIGN_NEXT_OLDER",
            "projectName": "$GcpProject",
            "unit": "{cpu}",
            "valueType": "DOUBLE"
          },
          "queryType": "metrics",
          "refId": "D"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-tf-service container cpu cores (sum by deployment)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:713",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:714",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "gKwG6qoVz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 223
      },
      "hiddenSeries": false,
      "id": 64,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "current",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "expr": "topk_max(15, histogram_quantile(0.99, sum(rate(:tensorflow:serving:request_latency_bucket{clustername=\"[[Cluster]]\", service_prometheus_track=~\"[[TfService]]\"}[1m])) by (le, model_name, kubernetes_pod_name)))",
          "interval": "",
          "legendFormat": "{{model_name}}-{{kubernetes_pod_name}}",
          "refId": "A"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-tf-service index wise p99 latency (by pod, topk)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:45",
          "format": "µs",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:46",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "alert": {
        "alertRuleTags": {},
        "conditions": [
          {
            "evaluator": {
              "params": [
                1
              ],
              "type": "lt"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "B",
                "1m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "avg"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "alerting",
        "for": "10m",
        "frequency": "1m",
        "handler": 1,
        "message": "@aryansharma @vivekchandela @kartikeypohani",
        "name": "Hamsa for ShareChat: sharecone-tf-service pods availability [SLA]",
        "noDataState": "alerting",
        "notifications": [
          {
            "uid": "5Z70mApnz"
          },
          {
            "uid": "ernA8Oy7k"
          }
        ]
      },
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 231
      },
      "hiddenSeries": false,
      "id": 22,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(kube_deployment_status_replicas_available{clustername=\"sc-p-ds-generic-services-05\", namespace=\"sharecone\", deployment=~\"[[TfService]]\"}) by (deployment)",
          "format": "time_series",
          "instant": false,
          "interval": "",
          "legendFormat": "{{deployment}}",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "expr": "min(sum(kube_deployment_status_replicas_available{clustername=\"production-cluster-41\", namespace=\"sharecone\", deployment=~\"hamsa-tf-service-.*\"}) by (deployment))",
          "hide": true,
          "interval": "",
          "legendFormat": "",
          "refId": "B"
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "lt",
          "value": 1,
          "visible": true
        }
      ],
      "timeRegions": [],
      "title": "sharecone-tf-service pods availability",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:510",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:511",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 0,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 232
      },
      "hiddenSeries": false,
      "id": 36,
      "legend": {
        "alignAsTable": true,
        "avg": true,
        "current": true,
        "max": false,
        "min": false,
        "show": true,
        "sort": "avg",
        "sortDesc": true,
        "total": false,
        "values": true
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "$$hashKey": "object:181",
          "alias": "hamsa-tf-service [used total]",
          "hiddenSeries": true,
          "linewidth": 2
        },
        {
          "$$hashKey": "object:192",
          "alias": "hamsa-tf-service [requested total]",
          "hiddenSeries": true,
          "linewidth": 2
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [used]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "$TfService",
              "AND",
              "metric.label.memory_type",
              "=",
              "non-evictable"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/memory/used_bytes",
            "perSeriesAligner": "ALIGN_MEAN",
            "projectName": "$GcpProject",
            "unit": "By",
            "valueType": "INT64"
          },
          "queryType": "metrics",
          "refId": "A"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "{{resource.label.container_name}} [requested]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "$TfService"
            ],
            "groupBys": [
              "resource.label.container_name"
            ],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/memory/request_bytes",
            "perSeriesAligner": "ALIGN_NEXT_OLDER",
            "projectName": "$GcpProject",
            "unit": "By",
            "valueType": "INT64"
          },
          "queryType": "metrics",
          "refId": "B"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "hamsa-tf-service [used total]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "hamsa-tf-service-.*",
              "AND",
              "metric.label.memory_type",
              "=",
              "non-evictable"
            ],
            "groupBys": [],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/memory/used_bytes",
            "perSeriesAligner": "ALIGN_MEAN",
            "projectName": "$GcpProject",
            "unit": "By",
            "valueType": "INT64"
          },
          "queryType": "metrics",
          "refId": "C"
        },
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "metricQuery": {
            "aliasBy": "hamsa-tf-service [requested total]",
            "alignmentPeriod": "+60s",
            "crossSeriesReducer": "REDUCE_SUM",
            "filters": [
              "resource.label.cluster_name",
              "=",
              "$Cluster",
              "AND",
              "resource.label.namespace_name",
              "=",
              "sharecone",
              "AND",
              "resource.label.container_name",
              "=~",
              "hamsa-tf-service-.*"
            ],
            "groupBys": [],
            "metricKind": "GAUGE",
            "metricType": "kubernetes.io/container/memory/request_bytes",
            "perSeriesAligner": "ALIGN_NEXT_OLDER",
            "projectName": "$GcpProject",
            "unit": "By",
            "valueType": "INT64"
          },
          "queryType": "metrics",
          "refId": "D"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "sharecone-tf-service container ram (sum by deployment)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:357",
          "format": "bytes",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:358",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 239
      },
      "hiddenSeries": false,
      "id": 150,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum(rate(container_cpu_cfs_throttled_periods_total{namespace=\"sharecone\",  deployment=~\"[[TfService]]\"}[1m])) by (pod) / sum(rate(container_cpu_cfs_periods_total{namespace=\"sharecone\", deployment=~\"[[TfService]]\"}[1m])) by (pod)",
          "interval": "",
          "legendFormat": "{{pod}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "exemplar": true,
          "expr": "sum(rate(container_cpu_cfs_throttled_periods_total{namespace=\"sharecone\", exported_pod=~\"[[TfService]]-.*\"}[1m])) by (exported_pod) / sum(rate(container_cpu_cfs_periods_total{namespace=\"sharecone\", exported_pod=~\"[[TfService]]-.*\"}[1m])) by (exported_pod)",
          "hide": false,
          "interval": "",
          "legendFormat": "{{exported_pod}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "tf-service cpu throttling",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "alert": {
        "alertRuleTags": {},
        "conditions": [
          {
            "evaluator": {
              "params": [
                1
              ],
              "type": "gt"
            },
            "operator": {
              "type": "and"
            },
            "query": {
              "params": [
                "A",
                "1m",
                "now"
              ]
            },
            "reducer": {
              "params": [],
              "type": "max"
            },
            "type": "query"
          }
        ],
        "executionErrorState": "alerting",
        "for": "0m",
        "frequency": "1m",
        "handler": 1,
        "message": "@aryansharma @vivekchandela @kartikeypohani",
        "name": "Hamsa for ShareChat: sharecone-tf-service pods restarts",
        "noDataState": "no_data",
        "notifications": [
          {
            "uid": "5Z70mApnz"
          },
          {
            "uid": "ernA8Oy7k"
          }
        ]
      },
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fieldConfig": {
        "defaults": {
          "links": []
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 240
      },
      "hiddenSeries": false,
      "id": 27,
      "legend": {
        "avg": false,
        "current": false,
        "hideEmpty": true,
        "hideZero": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk(10, sum(increase(kube_pod_container_status_restarts_total{namespace=\"sharecone\", container=~\"hamsa-tf-service-.*\",clustername=\"sc-p-ds-generic-services-05\"}[5m])) by (container))",
          "format": "time_series",
          "instant": false,
          "interval": "",
          "legendFormat": "{{deployment}}",
          "refId": "A"
        }
      ],
      "thresholds": [
        {
          "colorMode": "critical",
          "fill": true,
          "line": true,
          "op": "gt",
          "value": 1,
          "visible": true
        }
      ],
      "timeRegions": [],
      "title": "sharecone-tf-service pods restarts (worst)",
      "tooltip": {
        "shared": true,
        "sort": 2,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:125",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:126",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": {
        "type": "prometheus",
        "uid": "j-XjTQo4k"
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 247
      },
      "hiddenSeries": false,
      "id": 152,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "nullPointMode": "null",
      "options": {
        "alertThreshold": true
      },
      "percentage": false,
      "pluginVersion": "9.3.2",
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "topk(10, sum(rate(container_cpu_cfs_throttled_periods_total{namespace=\"sharecone\",  deployment=~\"[[TfService]]\"}[1m])) by (pod) / sum(rate(container_cpu_cfs_periods_total{namespace=\"sharecone\",  deployment=~\"[[TfService]]\"}[1m])) by (pod))",
          "interval": "",
          "legendFormat": "{{pod}}",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "exemplar": true,
          "expr": "topk(10, sum(rate(container_cpu_cfs_throttled_periods_total{namespace=\"sharecone\", exported_pod=~\"hamsa-tf-service-.*\"}[1m])) by (exported_pod) / sum(rate(container_cpu_cfs_periods_total{namespace=\"sharecone\", exported_pod=~\"hamsa-tf-service-.*\"}[1m])) by (exported_pod))",
          "hide": false,
          "interval": "",
          "legendFormat": "{{exported_pod}}",
          "refId": "B"
        }
      ],
      "thresholds": [],
      "timeRegions": [],
      "title": "Panel Title",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "mode": "time",
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "$$hashKey": "object:730",
          "format": "short",
          "logBase": 1,
          "show": true
        },
        {
          "$$hashKey": "object:731",
          "format": "short",
          "logBase": 1,
          "show": true
        }
      ],
      "yaxis": {
        "align": false
      }
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 255
      },
      "id": 31,
      "panels": [
        {
          "alert": {
            "alertRuleTags": {},
            "conditions": [
              {
                "evaluator": {
                  "params": [
                    80
                  ],
                  "type": "gt"
                },
                "operator": {
                  "type": "and"
                },
                "query": {
                  "params": [
                    "B",
                    "5m",
                    "now"
                  ]
                },
                "reducer": {
                  "params": [],
                  "type": "avg"
                },
                "type": "query"
              }
            ],
            "executionErrorState": "alerting",
            "for": "15m",
            "frequency": "1m",
            "handler": 1,
            "message": "@aryansharma @vivekchandela @kartikeypohani",
            "name": "Hamsa for ShareChat: redis cpu",
            "noDataState": "no_data",
            "notifications": [
              {
                "uid": "ernA8Oy7k"
              }
            ]
          },
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "description": "Vector search redis cpu",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 6
          },
          "hiddenSeries": false,
          "id": 18,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "expr": "(delta(redis_process_cpu_system_seconds_total{bdb=\"$RedisBdb\"}[60s]) + delta(redis_process_cpu_user_seconds_total{bdb=\"$RedisBdb\"}[60s]))/60*100 or redis_cpu_percent{bdb=\"$RedisBdb\"}",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "expr": "(delta(redis_process_cpu_system_seconds_total{bdb=\"10820102\"}[60s]) + delta(redis_process_cpu_user_seconds_total{bdb=\"10820102\"}[60s]))/60*100 or redis_cpu_percent{bdb=\"10820102\"}",
              "hide": true,
              "interval": "",
              "legendFormat": "",
              "refId": "B"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 80,
              "visible": true
            }
          ],
          "timeRegions": [],
          "title": "Vector search redis cpu",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:318",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:319",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "alert": {
            "alertRuleTags": {},
            "conditions": [
              {
                "evaluator": {
                  "params": [
                    0.85
                  ],
                  "type": "gt"
                },
                "operator": {
                  "type": "and"
                },
                "query": {
                  "params": [
                    "B",
                    "5m",
                    "now"
                  ]
                },
                "reducer": {
                  "params": [],
                  "type": "avg"
                },
                "type": "query"
              }
            ],
            "executionErrorState": "alerting",
            "for": "5m",
            "frequency": "1m",
            "handler": 1,
            "message": "@aryansharma @vivekchandela @kartikeypohani",
            "name": "Hamsa for Sharechat: redis memory",
            "noDataState": "no_data",
            "notifications": [
              {
                "uid": "bYTa4sMGz"
              },
              {
                "uid": "5Z70mApnz"
              },
              {
                "uid": "ernA8Oy7k"
              }
            ]
          },
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "description": "Vector search redis memory",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 6
          },
          "hiddenSeries": false,
          "id": 16,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "editorMode": "code",
              "expr": "scalar(bdb_used_memory{bdb=\"10820102\"})/bdb_memory_limit{bdb=\"10820102\"}",
              "interval": "",
              "legendFormat": "",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "editorMode": "code",
              "expr": "scalar(bdb_used_memory{bdb=\"10820102\"})/bdb_memory_limit{bdb=\"10820102\"}",
              "hide": true,
              "interval": "",
              "legendFormat": "",
              "range": true,
              "refId": "B"
            }
          ],
          "thresholds": [
            {
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 0.85,
              "visible": true
            }
          ],
          "timeRegions": [],
          "title": "Vector search redis memory",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:318",
              "format": "percentunit",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:319",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 14
          },
          "hiddenSeries": false,
          "id": 4,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "expr": "histogram_quantile(0.99, sum(rate(latency_redis_calls_bucket{service_prometheus_track=\"sharecone-service\", clustername=\"[[Cluster]]\"}[1m])) by (le,functionName,redisFunc))",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "redis latency (p99)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:45",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:46",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 14
          },
          "hiddenSeries": false,
          "id": 49,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "expr": "histogram_quantile(0.90, sum(rate(latency_redis_calls_bucket{service_prometheus_track=\"sharecone-service\", clustername=\"[[Cluster]]\"}[1m])) by (le,functionName,redisFunc))",
              "interval": "",
              "legendFormat": "",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "redis latency (p90)",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:45",
              "format": "s",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:46",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "refId": "A"
        }
      ],
      "title": "redis",
      "type": "row"
    },
    {
      "collapsed": true,
      "datasource": {
        "type": "stackdriver",
        "uid": "b01R5m04k"
      },
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 256
      },
      "id": 29,
      "panels": [
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 20,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "links": [
            {
              "targetBlank": true,
              "title": "k8s-clusters-overview",
              "url": "https://monitoring.sharechat.com/d/Orj_jtTnk/k8s-clusters-overview?orgId=1&var-ds=VM&var-cluster=production-cluster-41&from=now-7d&to=now"
            },
            {
              "targetBlank": true,
              "title": "gcp metrics",
              "url": "https://console.cloud.google.com/monitoring/metrics-explorer?pageState=%7B%22xyChart%22:%7B%22dataSets%22:%5B%7B%22timeSeriesFilter%22:%7B%22filter%22:%22metric.type%3D%5C%22compute.googleapis.com%2Finstance%2Fcpu%2Freserved_cores%5C%22%20resource.type%3D%5C%22gce_instance%5C%22%20resource.label.%5C%22project_id%5C%22%3D%5C%22sharechat-production%5C%22%20metadata.user_labels.%5C%22gke-cluster%5C%22%3D%5C%22production-cluster-41%5C%22%22,%22minAlignmentPeriod%22:%2260s%22,%22aggregations%22:%5B%7B%22perSeriesAligner%22:%22ALIGN_MEAN%22,%22crossSeriesReducer%22:%22REDUCE_SUM%22,%22alignmentPeriod%22:%2260s%22,%22groupByFields%22:%5B%22metadata.system_labels.%5C%22machine_type%5C%22%22%5D%7D,%7B%22crossSeriesReducer%22:%22REDUCE_NONE%22,%22alignmentPeriod%22:%2260s%22,%22groupByFields%22:%5B%5D%7D%5D%7D,%22targetAxis%22:%22Y1%22,%22plotType%22:%22LINE%22%7D%5D,%22options%22:%7B%22mode%22:%22COLOR%22%7D,%22constantLines%22:%5B%5D,%22timeshiftDuration%22:%220s%22,%22y1Axis%22:%7B%22label%22:%22y1Axis%22,%22scale%22:%22LINEAR%22%7D%7D,%22isAutoRefresh%22:true,%22timeSelection%22:%7B%22timeRange%22:%221w%22%7D%7D&project=sharechat-production&authuser=1"
            }
          ],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(kube_node_status_allocatable{clustername=~\"sc-p-ds-generic-services-03|sc-p-ds-generic-jobs-01\", resource=\"cpu\"}) by (clustername)",
              "interval": "",
              "legendFormat": "{{clustername}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "CPU",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:176",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:177",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 7
          },
          "hiddenSeries": false,
          "id": 62,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "links": [
            {
              "targetBlank": true,
              "title": "k8s-clusters-overview",
              "url": "https://monitoring.sharechat.com/d/Orj_jtTnk/k8s-clusters-overview?orgId=1&var-ds=VM&var-cluster=production-cluster-41&from=now-7d&to=now"
            }
          ],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "editorMode": "code",
              "expr": "sum(kube_node_status_allocatable{clustername=~\"sc-p-ds-generic-services-03|sc-p-ds-generic-jobs-01\", resource=\"memory\"}) by (clustername)",
              "interval": "",
              "legendFormat": "{{clustername}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "RAM",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:176",
              "format": "decbytes",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:177",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 15
          },
          "hiddenSeries": false,
          "id": 129,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}}",
                "alignmentPeriod": "stackdriver-auto",
                "crossSeriesReducer": "REDUCE_MEAN",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "$Cluster",
                  "AND",
                  "resource.label.pod_name",
                  "=",
                  "hamsa-tf-service*"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/cpu/request_utilization",
                "perSeriesAligner": "ALIGN_INTERPOLATE",
                "projectName": "sharechat-production",
                "query": "",
                "unit": "1",
                "valueType": "DOUBLE"
              },
              "queryType": "metrics",
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "$$hashKey": "object:308",
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 0.5,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Hamsa TF Service - avg CPU utilization over pods",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:176",
              "format": "percentunit",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:177",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 15
          },
          "hiddenSeries": false,
          "id": 127,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}}",
                "alignmentPeriod": "stackdriver-auto",
                "crossSeriesReducer": "REDUCE_SUM",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "$Cluster",
                  "AND",
                  "resource.label.pod_name",
                  "=",
                  "hamsa-tf-service*"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/memory/used_bytes",
                "perSeriesAligner": "ALIGN_INTERPOLATE",
                "projectName": "sharechat-production",
                "query": "",
                "unit": "By",
                "valueType": "INT64"
              },
              "queryType": "metrics",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Hamsa TF Service - total RAM over pods",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:176",
              "format": "bytes",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:177",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 24
          },
          "hiddenSeries": false,
          "id": 125,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "expr": "sum_over_time(delta(kube_horizontalpodautoscaler_status_current_replicas{clustername=~\"[[Cluster]]\",namespace=~\"sharecone\",horizontalpodautoscaler=~\"hamsa-tf-service.*\"})[1h])",
              "interval": "",
              "legendFormat": "{{ horizontalpodautoscaler }}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Hamsa TF Service - Pods delta within 1 hour period",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:262",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:263",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 31
          },
          "hiddenSeries": false,
          "id": 123,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "kube_horizontalpodautoscaler_status_current_replicas{clustername=~\"[[Cluster]]\",namespace=~\"sharecone\",horizontalpodautoscaler=~\"hamsa-tf-service.*\"}",
              "interval": "",
              "legendFormat": "{{ horizontalpodautoscaler }}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Hamsa TF Service - total Pods",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:262",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:263",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 38
          },
          "hiddenSeries": false,
          "id": 121,
          "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{resource.label.container_name}}",
                "alignmentPeriod": "stackdriver-auto",
                "crossSeriesReducer": "REDUCE_MEAN",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "$Cluster",
                  "AND",
                  "resource.label.pod_name",
                  "=",
                  "sharecone-service*"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/cpu/request_utilization",
                "perSeriesAligner": "ALIGN_INTERPOLATE",
                "projectName": "sharechat-production",
                "query": "",
                "unit": "1",
                "valueType": "DOUBLE"
              },
              "queryType": "metrics",
              "refId": "A"
            }
          ],
          "thresholds": [
            {
              "$$hashKey": "object:308",
              "colorMode": "critical",
              "fill": true,
              "line": true,
              "op": "gt",
              "value": 0.8,
              "yaxis": "left"
            }
          ],
          "timeRegions": [],
          "title": "Sharecone Service - avg CPU utilization over pods",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:176",
              "format": "percentunit",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:177",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 0,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 38
          },
          "hiddenSeries": false,
          "id": 119,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "links": [],
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "stackdriver",
                "uid": "b01R5m04k"
              },
              "metricQuery": {
                "aliasBy": "{{ resource.label.container_name }}",
                "alignmentPeriod": "stackdriver-auto",
                "crossSeriesReducer": "REDUCE_SUM",
                "editorMode": "visual",
                "filters": [
                  "resource.label.cluster_name",
                  "=",
                  "$Cluster",
                  "AND",
                  "resource.label.pod_name",
                  "=",
                  "sharecone-service*",
                  "AND",
                  "metric.label.memory_type",
                  "=",
                  "non-evictable"
                ],
                "groupBys": [
                  "resource.label.container_name"
                ],
                "metricKind": "GAUGE",
                "metricType": "kubernetes.io/container/memory/used_bytes",
                "perSeriesAligner": "ALIGN_INTERPOLATE",
                "projectName": "sharechat-production",
                "query": "",
                "unit": "By",
                "valueType": "INT64"
              },
              "queryType": "metrics",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Sharecone Service - total RAM over pods",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:176",
              "format": "bytes",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:177",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 46
          },
          "hiddenSeries": false,
          "id": 117,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "max",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "expr": "sum(kube_horizontalpodautoscaler_status_current_replicas{clustername=~\"[[Cluster]]\",namespace=~\"sharecone\",horizontalpodautoscaler=\"sharecone-service\"}) by (horizontalpodautoscaler)",
              "interval": "",
              "legendFormat": "{{ horizontalpodautoscaler }}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Sharecone Service - Pods",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:262",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:263",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 54
          },
          "hiddenSeries": false,
          "id": 115,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "max",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum(kube_pod_status_phase{phase=~\"Failed|Unknown\",  namespace=\"sharecone\"}) by (phase, exported_pod) != 0",
              "interval": "",
              "legendFormat": "{{phase}}: {{ exported_pod }}}",
              "range": true,
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Sharecone Pods - Failed or Unknown phase",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:262",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:263",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 54
          },
          "hiddenSeries": false,
          "id": 113,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": false,
            "max": true,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "max",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "sum(label_replace(\n  kube_pod_status_phase{phase=\"Pending\", clustername=\"[[Cluster]]\", namespace=\"sharecone\"}, \n  \"exported_pod_group\", \n  \"$1\", \n  \"exported_pod\",\n  \"(.*)-[^-]+-[^-]+$\"\n)) by (exported_pod_group)",
              "interval": "",
              "legendFormat": "{{ exported_pod_group }}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Sharecone Pods - Pending Phase",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:262",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:263",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": {
            "type": "prometheus",
            "uid": "j-XjTQo4k"
          },
          "fieldConfig": {
            "defaults": {
              "links": []
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 62
          },
          "hiddenSeries": false,
          "id": 130,
          "legend": {
            "alignAsTable": true,
            "avg": false,
            "current": true,
            "max": false,
            "min": false,
            "rightSide": true,
            "show": true,
            "sort": "current",
            "sortDesc": true,
            "total": false,
            "values": true
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null",
          "options": {
            "alertThreshold": true
          },
          "percentage": false,
          "pluginVersion": "9.3.2",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [],
          "spaceLength": 10,
          "stack": false,
          "steppedLine": false,
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "j-XjTQo4k"
              },
              "exemplar": true,
              "expr": "count(count(kube_node_spec_taint{clustername=~\"$Cluster\"}) by (key, node)) by (key) != 0",
              "interval": "",
              "legendFormat": "{{ key }}",
              "refId": "A"
            }
          ],
          "thresholds": [],
          "timeRegions": [],
          "title": "Sharecone nodes by taints",
          "tooltip": {
            "shared": true,
            "sort": 2,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "mode": "time",
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "$$hashKey": "object:262",
              "format": "short",
              "logBase": 1,
              "show": true
            },
            {
              "$$hashKey": "object:263",
              "format": "short",
              "logBase": 1,
              "show": true
            }
          ],
          "yaxis": {
            "align": false
          }
        }
      ],
      "targets": [
        {
          "datasource": {
            "type": "stackdriver",
            "uid": "b01R5m04k"
          },
          "refId": "A"
        }
      ],
      "title": "k8s cluster overview",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 257
      },
      "id": 164,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "wps"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 329
          },
          "id": 166,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "expr": "sum(rate(redpanda_hamsa_insert_events_count{service_prometheus_track=\"post-view-trigger-job\" ,topic=\"hamsa-insert-events\"}[2m])) by (topic)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Redpanda Hamsa  Insert Events",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 329
          },
          "id": 168,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "expr": "sum(rate(pubsub_hamsa_insert_events_count{service_prometheus_track=\"post-view-trigger-job\",topic=\"hamsa-insert-events\"}[2m])) by (topic)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Pubsub Fallback Counter",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "gKwG6qoVz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 337
          },
          "id": 170,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "gKwG6qoVz"
              },
              "editorMode": "code",
              "expr": "sum(rate(zero_qualifying_index_count{service_prometheus_track=\"post-view-trigger-job\"}[2m])) by (source,signal,ctype,lang)",
              "legendFormat": "{{source}}-{{signal}}-{{ctype}}-{{lang}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Zero Qualifying Indices",
          "type": "timeseries"
        }
      ],
      "title": "Post View Trigger Job",
      "type": "row"
    }
  ],
  "refresh": "15m",
  "schemaVersion": 39,
  "tags": [
    "ShareChat",
    "HAMSA",
    "sc-feed-content-journey"
  ],
  "templating": {
    "list": [
      {
        "hide": 2,
        "name": "Cluster",
        "query": "sc-p-ds-generic-services-05",
        "skipUrlSync": false,
        "type": "constant"
      },
      {
        "hide": 2,
        "name": "GcpProject",
        "query": "sharechat-production",
        "skipUrlSync": false,
        "type": "constant"
      },
      {
        "hide": 2,
        "name": "RedisBdb",
        "query": "10820102",
        "skipUrlSync": false,
        "type": "constant"
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "gKwG6qoVz"
        },
        "definition": "label_values(http_requests_total{service_prometheus_track=\"sharecone-service\"},route)",
        "hide": 0,
        "includeAll": true,
        "label": "path:",
        "multi": true,
        "name": "Path",
        "options": [],
        "query": {
          "query": "label_values(http_requests_total{service_prometheus_track=\"sharecone-service\"},route)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": false,
          "text": "200",
          "value": "200"
        },
        "hide": 0,
        "includeAll": false,
        "label": "status:",
        "multi": false,
        "name": "Status",
        "options": [
          {
            "selected": true,
            "text": "200",
            "value": "200"
          },
          {
            "selected": false,
            "text": "400",
            "value": "400"
          },
          {
            "selected": false,
            "text": "404",
            "value": "404"
          },
          {
            "selected": false,
            "text": "429",
            "value": "429"
          },
          {
            "selected": false,
            "text": "499",
            "value": "499"
          },
          {
            "selected": false,
            "text": "500",
            "value": "500"
          },
          {
            "selected": false,
            "text": "502",
            "value": "502"
          },
          {
            "selected": false,
            "text": "503",
            "value": "503"
          },
          {
            "selected": false,
            "text": "504",
            "value": "504"
          }
        ],
        "query": "200,400,404,429,499,500,502,503,504",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "gKwG6qoVz"
        },
        "definition": "label_values(hamsa_index_build_duration_seconds{service_prometheus_track=\"sharecone-index-builder\"}, indexName)",
        "hide": 0,
        "includeAll": true,
        "label": "indexName:",
        "multi": true,
        "name": "IndexName",
        "options": [],
        "query": {
          "query": "label_values(hamsa_index_build_duration_seconds{service_prometheus_track=\"sharecone-index-builder\"}, indexName)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 5,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "j-XjTQo4k"
        },
        "definition": "label_values(kube_deployment_status_replicas{namespace=\"sharecone\", deployment=~\"hamsa-tf-service-.*\"}, deployment)",
        "hide": 0,
        "includeAll": true,
        "label": "TfService:",
        "multi": true,
        "name": "TfService",
        "options": [],
        "query": {
          "query": "label_values(kube_deployment_status_replicas{namespace=\"sharecone\", deployment=~\"hamsa-tf-service-.*\"}, deployment)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 5,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      },
      {
        "current": {
          "selected": false,
          "text": "All",
          "value": "$__all"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "j-XjTQo4k"
        },
        "definition": "label_values(kube_deployment_status_replicas{namespace=\"sharecone\", deployment=~\"hamsa-index-builder-.*\"}, deployment)",
        "hide": 0,
        "includeAll": true,
        "label": "IndexBuilder:",
        "multi": true,
        "name": "IndexBuilder",
        "options": [],
        "query": {
          "query": "label_values(kube_deployment_status_replicas{namespace=\"sharecone\", deployment=~\"hamsa-index-builder-.*\"}, deployment)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 5,
        "tagValuesQuery": "",
        "tagsQuery": "",
        "type": "query",
        "useTags": false
      }
    ]
  },
  "time": {
    "from": "now-3h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": [
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
  },
  "timezone": "",
  "title": "Hamsa for ShareChat",
  "uid": "INg09k-nz",
  "version": 114,
  "weekStart": ""
}

